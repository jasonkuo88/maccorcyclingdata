
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Code Features &#8212; BattGeniePublish 1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Code overview" href="overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="overview.html" title="Code overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">BattGeniePublish 1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="code-features">
<h1>Code Features<a class="headerlink" href="#code-features" title="Permalink to this headline">¶</a></h1>
<p>The main functions available in the <a class="reference external" href="https://github.com/shriyachallam/BattGeniePublish">battgeniepublish</a> package are
listed below in alphabetical order. The list contains the module name
followed by the function name with the expected input parameters in
brackets.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.delete_cycle_steps(df,</span> <span class="pre">steps_to_delete,</span> <span class="pre">decrement=False)</span></code>: Given the testdata dataframe and a list of integers (step numbers that you want to delete), this function will delete all rows from the dataframe that have a cycle step index that matches any in the list of integers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.get_cycle_data(df,</span> <span class="pre">Headings,</span> <span class="pre">cyc_range)</span></code>: This function gets the data from the specified column for each sample within the specified cyc_range.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.get_index_range(df,</span> <span class="pre">cyc_range,</span> <span class="pre">cycle_step_idx)</span></code>: Given the testdata dataframe, this function returns the index range for the specified cycle range, or if a cycle step index is passed, as subset of each cyle for only that specific cycle step.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.get_num_cycles(df)</span></code>: Given the testdata dataframe, this function will return the number of cycles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.import_maccor_data(file_path,</span> <span class="pre">file_name)</span></code>: Given the file_path and file name of the testdata .csv file, this function will import the csv datafile as a df and clean it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdata.import_multiple_csv_data(file_path)</span></code>: Given the file path that holds multiple csv files (testdata files), this function will import and append all of the csv files to one another as one dataframe. Returns a cleaned version of that dataframe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schedules.import_schedules(file_path,</span> <span class="pre">file_name)</span></code>: Given the file path and file name (of the schedule file that is inputted into the Maccor Cycler), this function will import and clean the schedule file and return it as a df.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validate.validation_test_data(schedule_df,</span> <span class="pre">df,</span> <span class="pre">cell_id,</span> <span class="pre">time_interval,</span> <span class="pre">temp_interval,</span> <span class="pre">max_temp)</span></code>: This is a function that validates the testdata against the schedule file.</p></li>
</ul>
<p>In what follows, the above functions will be referred by simply their name, without stating the modules they belong to.</p>
<div class="section" id="the-delete-cycle-steps-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">delete_cycle_steps</span></code> function<a class="headerlink" href="#the-delete-cycle-steps-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">delete_cycle_steps</span></code> function reads an array of the step numbers that should be deleted, <code class="docutils literal notranslate"><span class="pre">steps_to_delete</span></code>, and deletes all rows that occur during those steps from the inputted testdata dataframe.
This function returns the testdata dataframe itself with the steps deleted. If the boolean <code class="docutils literal notranslate"><span class="pre">decrement</span></code> is set to True, the function will renumber the steps at the end. The <code class="docutils literal notranslate"><span class="pre">decrement</span></code> boolean is optional. The default value if False.</p>
</div>
<div class="section" id="the-get-cycle-data-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">get_cycle_data</span></code> function<a class="headerlink" href="#the-get-cycle-data-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">get_cycle_data</span></code> function gets the data from the array of specified columns, <code class="docutils literal notranslate"><span class="pre">Headings</span></code>, for each sample within the array of the cycle numbers that are of interest, <code class="docutils literal notranslate"><span class="pre">cyc_range</span></code>.
The function returns an array where the columns correspond to the specified columns and the rows corespond to the data.</p>
</div>
<div class="section" id="the-get-index-range-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">get_index_range</span></code> function<a class="headerlink" href="#the-get-index-range-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">get_index_range</span></code> function gets the index range for the array of the cycle numbers that are of interest, <code class="docutils literal notranslate"><span class="pre">cyc_range</span></code>.
The optional input- an array of specific step numbers, <code class="docutils literal notranslate"><span class="pre">cycle_step_idx</span></code>- will only find the indices for those step numbers within each specified cycle. The default value is to find the indices of all steps within each specified cycle.
The function returns a vector of the range of df indices for the specified cycle range.</p>
</div>
<div class="section" id="the-get-num-cycles-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">get_num_cycles</span></code> function<a class="headerlink" href="#the-get-num-cycles-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">get_num_cycles</span></code> function finds the number of cycles given the testdata dataframe, <code class="docutils literal notranslate"><span class="pre">df</span></code>.
The function returns an integer of the number of cycles in the dataframe.</p>
</div>
<div class="section" id="the-import-maccor-data-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">import_maccor_data</span></code> function<a class="headerlink" href="#the-import-maccor-data-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">import_maccor_data</span></code> function creates a pandas dataframe given a string of the file path, <code class="docutils literal notranslate"><span class="pre">file_path</span></code>, and a string of the file name, <code class="docutils literal notranslate"><span class="pre">file_name</span></code>, of a testdata dataframe.
The function will import and clean the testdata by renaming the headers and dropping unnecessary columns.
The columns must be named properly to be renamed to the following:</p>
<ul class="simple">
<li><p>From ‘Cyc#’ to ‘cyc’</p></li>
<li><p>From ‘Step’ to ‘step’</p></li>
<li><p>From ‘TestTime(s)’ to ‘test_time_s’</p></li>
<li><p>From ‘StepTime(s)’ to ‘step_time_s’</p></li>
<li><p>From ‘Capacity(Ah)’ to ‘capacity_mah’</p></li>
<li><p>From ‘Watt-hr’ to ‘energy_wh’</p></li>
<li><p>From ‘Current(A)’ to ‘current_ma’</p></li>
<li><p>From ‘Voltage(V)’ to ‘voltage_mv’</p></li>
<li><p>From ‘DPt Time’ to ‘dpt_time’</p></li>
<li><p>From ‘ACR’ to ‘acr’</p></li>
<li><p>From ‘DCIR’ to ‘dcir’</p></li>
<li><p>From ‘Temp 1’ to ‘thermocouple_temp_c’}</p></li>
<li><p>From ‘EV Temp’ to ‘ev_temp’</p></li>
<li><p>From ‘Unnamed: 13’ to ‘nnnamed’</p></li>
</ul>
<p>The function will delete the following columns: <code class="docutils literal notranslate"><span class="pre">acre</span></code>, <code class="docutils literal notranslate"><span class="pre">dcir</span></code>, <code class="docutils literal notranslate"><span class="pre">nnnamed</span></code>.
The function will change the datatype of the <code class="docutils literal notranslate"><span class="pre">energy_wh</span></code> column to numeric.
As of 5/05/2020, Maccor mislabels the Voltage column so this function also changes the units of Voltage.</p>
<p>The optional input- an integer that specifies which line is the header, <code class="docutils literal notranslate"><span class="pre">header</span></code>- will set the header to be that line number. The default value of <code class="docutils literal notranslate"><span class="pre">header</span></code> is 2.</p>
<p>The function returns a pandas dataframe of the cleaned testdata.</p>
</div>
<div class="section" id="the-import-multiple-csv-data-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">import_multiple_csv_data</span></code> function<a class="headerlink" href="#the-import-multiple-csv-data-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">import_multiple_csv_data</span></code> function creates a pandas dataframe given a string of the file path, <code class="docutils literal notranslate"><span class="pre">file_path</span></code>, of a directory that contains multiple csv files of testdata.
The function will import all files within the directory that end in .csv. Additionally, this function will append the csv files to one another depending on the order they appear in the directory.
This function will clean the data similar to the <code class="docutils literal notranslate"><span class="pre">import_maccor_data</span></code> function. The function will import and clean the testdata by renaming the headers and dropping unnecessary columns.
The columns must be named properly to be renamed to the following:</p>
<ul class="simple">
<li><p>From ‘Cyc#’ to ‘cyc’</p></li>
<li><p>From ‘Step’ to ‘step’</p></li>
<li><p>From ‘TestTime(s)’ to ‘test_time_s’</p></li>
<li><p>From ‘StepTime(s)’ to ‘step_time_s’</p></li>
<li><p>From ‘Capacity(Ah)’ to ‘capacity_mah’</p></li>
<li><p>From ‘Watt-hr’ to ‘energy_wh’</p></li>
<li><p>From ‘Current(A)’ to ‘current_ma’</p></li>
<li><p>From ‘Voltage(V)’ to ‘voltage_mv’</p></li>
<li><p>From ‘DPt Time’ to ‘dpt_time’</p></li>
<li><p>From ‘ACR’ to ‘acr’</p></li>
<li><p>From ‘DCIR’ to ‘dcir’</p></li>
<li><p>From ‘Temp 1’ to ‘thermocouple_temp_c’}</p></li>
<li><p>From ‘EV Temp’ to ‘ev_temp’</p></li>
<li><p>From ‘Unnamed: 13’ to ‘nnnamed’</p></li>
</ul>
<p>The function will delete the following columns: <code class="docutils literal notranslate"><span class="pre">acre</span></code>, <code class="docutils literal notranslate"><span class="pre">dcir</span></code>, <code class="docutils literal notranslate"><span class="pre">nnnamed</span></code>.
The function will change the datatype of the <code class="docutils literal notranslate"><span class="pre">energy_wh</span></code> column to numeric.
As of 5/05/2020, Maccor mislabels the Voltage column so this function also changes the units of Voltage.</p>
<p>The function returns a pandas dataframe with the cleaned testdata appended to one another.</p>
</div>
<div class="section" id="the-import-schedules-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">import_schedules</span></code> function<a class="headerlink" href="#the-import-schedules-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">import_schedules</span></code> function creates a pandas dataframe given a string of the file path, <code class="docutils literal notranslate"><span class="pre">file_path</span></code>, and a string of the file name, <code class="docutils literal notranslate"><span class="pre">file_name</span></code>, of the schedule file (xlxs file) that is inputted into the Maccor Cycler.
The function will rename the columns to the following (in this order): ‘step’, ‘step_type’, ‘step_mode’, ‘step_mode_value’, ‘step_limit’, ‘step_limit_value’, ‘step_end_type’, ‘step_end_type_op’, ‘step_end_type_value’, ‘goto_step’, ‘report_type’, ‘report_type_value’, ‘options’, ‘step_note’.</p>
<p>For all multiline steps (for example: steps with multiple options for the step it should go to depending on the result), this function will append those multiple lines into an array with each element being the value of each line. This allows for the function to keep each step to one line.
This function sets the datatype of the <code class="docutils literal notranslate"><span class="pre">step</span></code> and <code class="docutils literal notranslate"><span class="pre">step_limit_value</span></code> to integer and float respectively.</p>
<p>The function returns a pandas dataframe of the cleaned scheduler.</p>
</div>
<div class="section" id="the-validation-test-data-function">
<h2>The <code class="docutils literal notranslate"><span class="pre">validation_test_data</span></code> function<a class="headerlink" href="#the-validation-test-data-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">validation_test_data</span></code> function validates the testdata against the scheduler.</p>
<p>Parameters of this function (in this order):</p>
<ul class="simple">
<li><p>schedule_df = the dataframe of the cleaned schedule file (from the <code class="docutils literal notranslate"><span class="pre">import_schedules</span></code> function)</p></li>
<li><p>df = testdata dataframe (from the <code class="docutils literal notranslate"><span class="pre">import_maccor_data</span></code> or <code class="docutils literal notranslate"><span class="pre">import_multiple_csv_data</span></code> functions)</p></li>
<li><p>cell_id = the cell id of the testdata (integer)</p></li>
<li><p>time_interval = the maximum interval of how often the cycler should be recording data in seconds (integer)</p></li>
<li><p>temp_interval = the maximum interval of a temperature change in number of degrees (integer)</p></li>
<li><p>max_temp = the threshold for the highest temperature allowed (integer)</p></li>
<li><p>tol = when making sure the temperature doesn’t exceed a certain amount, this function will return either a warning, error, or ABORT message. this input specifies the tolerance should these messages. This is an optional input, the default value is 3.</p></li>
</ul>
<p>The erros this function checks for:</p>
<ul class="simple">
<li><p>if during all the rest steps, the battery is actually resting</p></li>
<li><p>if during all charging steps, the battery is charging</p></li>
<li><p>if during all discharging steps, the battery is discharging</p></li>
<li><p>if during all advance cycle steps, the cycle is being advanced</p></li>
<li><p>if the step number never exceeds the max step number</p></li>
<li><p>data is collected for every <code class="docutils literal notranslate"><span class="pre">time_interval</span></code> given</p></li>
<li><p>the temperate never jumps or drops by an interval greater than the <code class="docutils literal notranslate"><span class="pre">temp_interval</span></code></p></li>
<li><p>the temperature never goes past the max temperature</p></li>
</ul>
<p>For the max temperature error, there are 3 possibilities of error messages:</p>
<ol class="arabic simple">
<li><p>warning - temperature approaching the max! (current temperature + tol &gt; max)</p></li>
<li><p>error - temperature has surpassed the max! (current temperature &gt;= max)</p></li>
<li><p>ABORT - temperature is way too hot! (current temperature &gt; max + tol)</p></li>
</ol>
<p>The function returns a pandas dataframe that lists all errors, <code class="docutils literal notranslate"><span class="pre">validation_df</span></code>.
Headers of the <code class="docutils literal notranslate"><span class="pre">validation_df</span></code>:</p>
<ol class="arabic simple">
<li><p>time (the current time of when the validation occurs)</p></li>
<li><p>run (tells whether the validation function is in progress or complete)</p></li>
<li><p>cell_num (the cell number of the testdata)</p></li>
<li><p>row_number (the row number where the error occurs)</p></li>
<li><p>error (what the error is)</p></li>
</ol>
<p>If the testdata does not have any errors, this function will return the <code class="docutils literal notranslate"><span class="pre">validation_df</span></code> that says “there are no errors.”</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Code Features</a><ul>
<li><a class="reference internal" href="#the-delete-cycle-steps-function">The <code class="docutils literal notranslate"><span class="pre">delete_cycle_steps</span></code> function</a></li>
<li><a class="reference internal" href="#the-get-cycle-data-function">The <code class="docutils literal notranslate"><span class="pre">get_cycle_data</span></code> function</a></li>
<li><a class="reference internal" href="#the-get-index-range-function">The <code class="docutils literal notranslate"><span class="pre">get_index_range</span></code> function</a></li>
<li><a class="reference internal" href="#the-get-num-cycles-function">The <code class="docutils literal notranslate"><span class="pre">get_num_cycles</span></code> function</a></li>
<li><a class="reference internal" href="#the-import-maccor-data-function">The <code class="docutils literal notranslate"><span class="pre">import_maccor_data</span></code> function</a></li>
<li><a class="reference internal" href="#the-import-multiple-csv-data-function">The <code class="docutils literal notranslate"><span class="pre">import_multiple_csv_data</span></code> function</a></li>
<li><a class="reference internal" href="#the-import-schedules-function">The <code class="docutils literal notranslate"><span class="pre">import_schedules</span></code> function</a></li>
<li><a class="reference internal" href="#the-validation-test-data-function">The <code class="docutils literal notranslate"><span class="pre">validation_test_data</span></code> function</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">Code overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/features.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="overview.html" title="Code overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">BattGeniePublish 1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, shriyachallam.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.0.
    </div>
  </body>
</html>